import{a as g}from"./chunk-IJJPJVDK.js";import{N as C,T as S,c as m,m as d,q as E,y as c}from"./chunk-KIZY3JWN.js";var i={BASE_URL:"http://65.20.80.83:8081",API_PREFIX:"/api",ENDPOINTS:{CAMPS:{BASE:"/camps",ACTIVE:"/camps/active",BY_ID:t=>`/camps/${t}`,CREATE:"/camps",UPDATE:t=>`/camps/${t}`,DELETE:t=>`/camps/${t}`},STOCK:{BASE:"/stock",CURRENT:"/stock/current",ADD:"/stock",BY_CAMP:t=>`/stock/camp/${t}`},CAMP_MEDICINE_STOCK_SUMMARY:{BY_CAMP:t=>`/camp-medicine-stock-summary/camp/${t}`},CAMP_MEDICINE_STOCK:{ADD:t=>"/medicine-stock/batch"},MEDICINES:{BASE:"/medicines",ACTIVE:"/medicines/active"},SUPPLIERS:{BASE:"/suppliers",ACTIVE:"/suppliers/active"},PHARMACY_SUPPLIER:{BASE:"/pharmacy-supplier",ACTIVE:"/pharmacy-supplier/active"},INVOICE:{BASE:"/invoice",CREATE:"/invoice"}}};function o(t){return`${i.BASE_URL}${i.API_PREFIX}${t}`}var y=class t{http=S(g);getAllCamps(){let a=o(i.ENDPOINTS.CAMPS.BASE);return this.http.get(a,{responseType:"text"}).pipe(E(r=>{try{let e=JSON.parse(r);return Array.isArray(e)?e.map(n=>(n.campAddresses&&Array.isArray(n.campAddresses)&&(n.campAddresses=n.campAddresses.map(s=>{let p=s,{camp:A}=p;return m(p,["camp"])})),n)):e}catch(e){throw console.error("Error parsing response text:",e),new Error("Failed to parse response")}}),c(r=>{if(console.error("Error fetching camps:",r),r.error&&r.error.text)try{let e=JSON.parse(r.error.text);if(Array.isArray(e)){let n=e.map(s=>(s.campAddresses&&Array.isArray(s.campAddresses)&&(s.campAddresses=s.campAddresses.map(A=>{let u=A,{camp:l}=u;return m(u,["camp"])})),s));return d(n)}return d(e)}catch(e){console.error("Error parsing error response text:",e)}throw r}))}getActiveCamps(){let a=o(i.ENDPOINTS.CAMPS.ACTIVE);return this.http.get(a).pipe(c(r=>{throw console.error("Error fetching active camps:",r),r}))}getCampById(a){let r=o(i.ENDPOINTS.CAMPS.BY_ID(a));return this.http.get(r).pipe(c(e=>{throw console.error(`Error fetching camp ${a}:`,e),e}))}getCampMedicineStockSummary(a){let r=o(i.ENDPOINTS.CAMP_MEDICINE_STOCK_SUMMARY.BY_CAMP(a));return this.http.get(r).pipe(c(e=>{throw console.error(`Error fetching camp medicine stock summary for camp ${a}:`,e),e}))}addCampMedicineStock(a,r){let e=o(i.ENDPOINTS.CAMP_MEDICINE_STOCK.ADD(a));return this.http.post(e,r).pipe(c(n=>{throw console.error("Error adding camp medicine stock:",n),n}))}createCamp(a){let r=o(i.ENDPOINTS.CAMPS.CREATE);return this.http.post(r,a).pipe(c(e=>{throw console.error("Error creating camp:",e),e}))}static \u0275fac=function(r){return new(r||t)};static \u0275prov=C({token:t,factory:t.\u0275fac,providedIn:"root"})};export{i as a,o as b,y as c};
