import{a as i,b as c}from"./chunk-F72T5MOD.js";import{a as b}from"./chunk-4IR5X23O.js";import{N as A,T as h,c as m,m as l,q as S,y as o}from"./chunk-UXRMFRYK.js";var E=class y{http=h(b);getAllCamps(t){let n=c(i.ENDPOINTS.CAMPS.BASE);if(t){let r=new URLSearchParams;Object.keys(t).forEach(s=>{t[s]!==null&&t[s]!==void 0&&r.append(s,t[s].toString())});let e=r.toString();e&&(n+=`?${e}`)}return this.http.get(n,{responseType:"text"}).pipe(S(r=>{try{let e=JSON.parse(r);return Array.isArray(e)?e.map(s=>(s.campAddresses&&Array.isArray(s.campAddresses)&&(s.campAddresses=s.campAddresses.map(a=>{let p=a,{camp:d}=p;return m(p,["camp"])})),s)):e}catch(e){throw console.error("Error parsing response text:",e),new Error("Failed to parse response")}}),o(r=>{if(console.error("Error fetching camps:",r),r.error&&r.error.text)try{let e=JSON.parse(r.error.text);if(Array.isArray(e)){let s=e.map(a=>(a.campAddresses&&Array.isArray(a.campAddresses)&&(a.campAddresses=a.campAddresses.map(d=>{let u=d,{camp:g}=u;return m(u,["camp"])})),a));return l(s)}return l(e)}catch(e){console.error("Error parsing error response text:",e)}throw r}))}getActiveCamps(t){let n=c(i.ENDPOINTS.CAMPS.ACTIVE);if(t){let r=new URLSearchParams;Object.keys(t).forEach(s=>{t[s]!==null&&t[s]!==void 0&&r.append(s,t[s].toString())});let e=r.toString();e&&(n+=`?${e}`)}return this.http.get(n,{responseType:"text"}).pipe(S(r=>{try{let e=JSON.parse(r);return Array.isArray(e)?e.map(s=>(s.campAddresses&&Array.isArray(s.campAddresses)&&(s.campAddresses=s.campAddresses.map(a=>{let p=a,{camp:d}=p;return m(p,["camp"])})),s)):e}catch(e){throw console.error("Error parsing response text:",e),new Error("Failed to parse response")}}),o(r=>{if(console.error("Error fetching camps:",r),r.error&&r.error.text)try{let e=JSON.parse(r.error.text);if(Array.isArray(e)){let s=e.map(a=>(a.campAddresses&&Array.isArray(a.campAddresses)&&(a.campAddresses=a.campAddresses.map(d=>{let u=d,{camp:g}=u;return m(u,["camp"])})),a));return l(s)}return l(e)}catch(e){console.error("Error parsing error response text:",e)}throw r}))}getCampById(t){let n=c(i.ENDPOINTS.CAMPS.BY_ID(t));return this.http.get(n).pipe(o(r=>{throw console.error(`Error fetching camp ${t}:`,r),r}))}getCampMedicineStockSummary(t){let n=c(i.ENDPOINTS.CAMP_MEDICINE_STOCK_SUMMARY.BY_CAMP(t));return this.http.get(n).pipe(o(r=>{throw console.error(`Error fetching camp medicine stock summary for camp ${t}:`,r),r}))}addCampMedicineStock(t,n){let r=c(i.ENDPOINTS.CAMP_MEDICINE_STOCK.ADD(t));return this.http.post(r,n).pipe(o(e=>{throw console.error("Error adding camp medicine stock:",e),e}))}createCamp(t){let n=c(i.ENDPOINTS.CAMPS.CREATE);return this.http.post(n,t).pipe(o(r=>{throw console.error("Error creating camp:",r),r}))}getStates(){let t=c(i.ENDPOINTS.STATES.BASE);return this.http.get(t).pipe(o(n=>{throw console.error("Error fetching states:",n),n}))}getDistrictsByState(t){let n=c(i.ENDPOINTS.DISTRICTS.BY_STATE(t));return this.http.get(n).pipe(o(r=>{throw console.error("Error fetching districts:",r),r}))}getMandalsByDistrict(t){let n=c(i.ENDPOINTS.MANDALS.BY_DISTRICT(t));return this.http.get(n).pipe(o(r=>{throw console.error("Error fetching mandals:",r),r}))}getUsersByRole(t,n){let r=c(i.ENDPOINTS.USERS.BY_ROLE(t));if(n){let e=new URLSearchParams;Object.keys(n).forEach(a=>{n[a]!==null&&n[a]!==void 0&&e.append(a,n[a].toString())});let s=e.toString();s&&(r+=`?${s}`)}return this.http.get(r).pipe(o(e=>{throw console.error(`Error fetching users by role ${t}:`,e),e}))}getCampRunPlanning(t){let n=c(i.ENDPOINTS.CAMP_RUNS.PLANNING(t));return this.http.get(n).pipe(o(r=>{throw console.error(`Error fetching camp run planning for camp ${t}:`,r),r}))}saveCampRunPlanning(t){let n=c(i.ENDPOINTS.CAMP_RUNS.SAVE_PLANNING);return this.http.post(n,t).pipe(o(r=>{throw console.error("Error saving camp run planning:",r),r}))}startCampRun(t,n){let r=c(i.ENDPOINTS.CAMP_RUNS.START(t,n));return this.http.post(r,{}).pipe(o(e=>{throw console.error(`Error starting camp run ${n} for camp ${t}:`,e),e}))}stopCampRun(t,n){let r=c(i.ENDPOINTS.CAMP_RUNS.STOP(t,n));return this.http.post(r,{}).pipe(o(e=>{throw console.error(`Error stopping camp run ${n} for camp ${t}:`,e),e}))}static \u0275fac=function(n){return new(n||y)};static \u0275prov=A({token:y,factory:y.\u0275fac,providedIn:"root"})};export{E as a};
