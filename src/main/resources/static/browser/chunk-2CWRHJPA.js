import{a as it}from"./chunk-KGMYUK7M.js";import{c as et}from"./chunk-HV5MXW2Z.js";import{a as Q,b as U}from"./chunk-S4ZXMNS3.js";import{a as z,b as K}from"./chunk-LA77VLWS.js";import{a as $,b as tt}from"./chunk-O424JL4V.js";import{a as X,b as Z}from"./chunk-E4SL4NQR.js";import{g as Y,h as j}from"./chunk-Z364KTRN.js";import{j as k,l as N,m as q,n as A,o as R,q as J,r as G,s as H}from"./chunk-DFYNJMLI.js";import"./chunk-TW4MKDRA.js";import"./chunk-3YGUWUUY.js";import{a as L,b as B}from"./chunk-NMIQV5RM.js";import{Cd as W,Eb as s,Fb as y,Ia as l,Ib as p,Jb as m,Kb as _,Mb as V,Rd as O,Sa as S,Sd as I,Vb as P,Xb as T,Ya as M,Z as C,_ as h,a as f,b as v,db as c,gb as b,mb as i,nb as n,ob as x,rc as E,sb as w,ub as g,uc as F,vb as u,vc as D}from"./chunk-NQGTOHWB.js";var ot=()=>({width:"600px"}),at=()=>({width:"700px"});function rt(d,r){d&1&&(i(0,"tr")(1,"th"),s(2,"ID"),n(),i(3,"th"),s(4,"Patient"),n(),i(5,"th"),s(6,"Visit Type"),n(),i(7,"th"),s(8,"Doctor"),n(),i(9,"th"),s(10,"Camp"),n(),i(11,"th"),s(12,"Visit Date"),n(),i(13,"th"),s(14,"Actions"),n()())}function st(d,r){if(d&1){let o=w();i(0,"tr")(1,"td"),s(2),n(),i(3,"td"),s(4),n(),i(5,"td"),x(6,"p-tag",38),n(),i(7,"td"),s(8),n(),i(9,"td"),s(10),n(),i(11,"td"),s(12),P(13,"date"),n(),i(14,"td")(15,"p-button",39),g("onClick",function(){let a=C(o).$implicit,e=u();return h(e.openConsultation(a))}),n()()()}if(d&2){let o=r.$implicit,t=u();l(2),y(o.visit_id),l(2),y(o.patient_name),l(2),c("value",o.visit_type)("severity",t.getVisitTypeSeverity(o.visit_type)),l(2),y(o.doctor_name),l(2),y(o.camp_name||"Emergency"),l(2),y(T(13,9,o.visit_date,"shortDate")),l(3),c("text",!0)("rounded",!0)}}function lt(d,r){if(d&1){let o=w();i(0,"div",12)(1,"label",40),s(2,"Camp Run"),n(),i(3,"p-dropdown",41),_("ngModelChange",function(a){C(o);let e=u();return m(e.visitForm.camp_run_id,a)||(e.visitForm.camp_run_id=a),h(a)}),n()()}if(d&2){let o=u();l(3),p("ngModel",o.visitForm.camp_run_id),c("options",o.campRuns)}}function dt(d,r){if(d&1){let o=w();i(0,"p-button",42),g("onClick",function(){C(o);let a=u();return h(a.displayVisitDialog=!1)}),n(),i(1,"p-button",43),g("onClick",function(){C(o);let a=u();return h(a.saveVisit())}),n()}d&2&&c("text",!0)}function pt(d,r){if(d&1){let o=w();i(0,"p-button",42),g("onClick",function(){C(o);let a=u();return h(a.displayConsultationDialog=!1)}),n(),i(1,"p-button",44),g("onClick",function(){C(o);let a=u();return h(a.saveConsultation())}),n()}d&2&&c("text",!0)}var nt=class d{visits=[];consultations=[];filteredVisits=[];displayVisitDialog=!1;displayConsultationDialog=!1;isEditMode=!1;searchText="";selectedVisit=null;visitTypes=[{label:"CAMP",value:"CAMP"},{label:"EMERGENCY",value:"EMERGENCY"}];patients=[{patient_id:1,first_name:"John",last_name:"Doe",label:"John Doe"},{patient_id:2,first_name:"Jane",last_name:"Smith",label:"Jane Smith"}];doctors=[{user_id:1,user_name:"Dr. Sarah Johnson"},{user_id:2,user_name:"Dr. Michael Chen"}];campRuns=[{camp_run_id:1,camp_name:"General Health Camp - Feb 1"},{camp_run_id:2,camp_name:"Diabetes Camp - Feb 15"}];visitForm={patient_id:0,visit_type:"CAMP",doctor_id:0,visit_date:new Date};consultationForm={visit_id:0,diagnosis_notes:"",height:void 0,weight:"",systolic_bp:"",pulse_rate:"",bmi:""};ngOnInit(){this.loadVisits()}loadVisits(){this.visits=[{visit_id:1,patient_id:1,visit_type:"CAMP",camp_run_id:1,doctor_id:1,visit_date:new Date("2024-02-01"),patient_name:"John Doe",doctor_name:"Dr. Sarah Johnson",camp_name:"General Health Camp",created_at:new Date("2024-02-01")}],this.filteredVisits=[...this.visits]}onSearch(){if(!this.searchText){this.filteredVisits=[...this.visits];return}this.filteredVisits=this.visits.filter(r=>r.patient_name?.toLowerCase().includes(this.searchText.toLowerCase())||r.doctor_name?.toLowerCase().includes(this.searchText.toLowerCase()))}openNewVisit(){this.visitForm={patient_id:0,visit_type:"CAMP",doctor_id:0,visit_date:new Date},this.isEditMode=!1,this.displayVisitDialog=!0}openConsultation(r){this.selectedVisit=r;let o=this.consultations.find(t=>t.visit_id===r.visit_id);o?this.consultationForm=f({},o):this.consultationForm={visit_id:r.visit_id||0,diagnosis_notes:"",height:void 0,weight:"",systolic_bp:"",pulse_rate:"",bmi:""},this.displayConsultationDialog=!0}saveVisit(){if(this.isEditMode&&this.visitForm.visit_id){let r=this.visits.findIndex(o=>o.visit_id===this.visitForm.visit_id);r!==-1&&(this.visits[r]=f({},this.visitForm))}else{let r=Math.max(...this.visits.map(a=>a.visit_id||0))+1,o=this.patients.find(a=>a.patient_id===this.visitForm.patient_id),t=this.doctors.find(a=>a.user_id===this.visitForm.doctor_id);this.visits.push(v(f({},this.visitForm),{visit_id:r,patient_name:o?`${o.first_name} ${o.last_name}`:"",doctor_name:t?.user_name||"",created_at:new Date}))}this.filteredVisits=[...this.visits],this.displayVisitDialog=!1}saveConsultation(){if(this.consultationForm.consultation_id){let r=this.consultations.findIndex(o=>o.consultation_id===this.consultationForm.consultation_id);r!==-1&&(this.consultations[r]=f({},this.consultationForm))}else{let r=Math.max(...this.consultations.map(o=>o.consultation_id||0))+1;this.consultations.push(v(f({},this.consultationForm),{consultation_id:r,created_at:new Date}))}this.displayConsultationDialog=!1}getVisitTypeSeverity(r){return r==="CAMP"?"success":"warning"}static \u0275fac=function(o){return new(o||d)};static \u0275cmp=S({type:d,selectors:[["app-visits"]],decls:62,vars:34,consts:[[1,"visits-container"],[1,"header-section"],["label","New Visit","icon","pi pi-plus","styleClass","p-button-raised",3,"onClick"],[1,"search-card"],[1,"search-field"],["for","search"],["pInputText","","id","search","placeholder","Search by patient or doctor",1,"w-full",3,"ngModelChange","input","ngModel"],["styleClass","p-datatable-striped",3,"value","paginator","rows"],["pTemplate","header"],["pTemplate","body"],[3,"visibleChange","visible","header","modal"],[1,"form-container"],[1,"field","full-width"],["for","patient"],["id","patient","optionLabel","label","optionValue","patient_id","placeholder","Select Patient",1,"w-full",3,"ngModelChange","ngModel","options","required"],["for","visitType"],["id","visitType","optionLabel","label","optionValue","value","placeholder","Select Visit Type",1,"w-full",3,"ngModelChange","ngModel","options","required"],["class","field full-width",4,"ngIf"],["for","doctor"],["id","doctor","optionLabel","user_name","optionValue","user_id","placeholder","Select Doctor",1,"w-full",3,"ngModelChange","ngModel","options","required"],["for","visitDate"],["id","visitDate","dateFormat","yy-mm-dd",1,"w-full",3,"ngModelChange","ngModel","required","showIcon"],["pTemplate","footer"],["header","Consultation",3,"visibleChange","visible","modal"],[1,"vitals-row"],[1,"field"],["for","height"],["pInputText","","id","height","type","number",1,"w-full",3,"ngModelChange","ngModel"],["for","weight"],["pInputText","","id","weight",1,"w-full",3,"ngModelChange","ngModel"],["for","bp"],["pInputText","","id","bp",1,"w-full",3,"ngModelChange","ngModel"],["for","pulse"],["pInputText","","id","pulse",1,"w-full",3,"ngModelChange","ngModel"],["for","bmi"],["pInputText","","id","bmi",1,"w-full",3,"ngModelChange","ngModel"],["for","diagnosis"],["pInputTextarea","","id","diagnosis","rows","5",1,"w-full",3,"ngModelChange","ngModel"],[3,"value","severity"],["icon","pi pi-plus-circle","severity","info","title","Add/View Consultation",3,"onClick","text","rounded"],["for","campRun"],["id","campRun","optionLabel","camp_name","optionValue","camp_run_id","placeholder","Select Camp Run",1,"w-full",3,"ngModelChange","ngModel","options"],["label","Cancel",3,"onClick","text"],["label","Save",3,"onClick"],["label","Save Consultation",3,"onClick"]],template:function(o,t){o&1&&(i(0,"div",0)(1,"div",1)(2,"h1"),s(3,"Patient Visits & Consultations"),n(),i(4,"p-button",2),g("onClick",function(){return t.openNewVisit()}),n()(),i(5,"p-card",3)(6,"div",4)(7,"label",5),s(8,"Search Visits"),n(),i(9,"input",6),_("ngModelChange",function(e){return m(t.searchText,e)||(t.searchText=e),e}),g("input",function(){return t.onSearch()}),n()()(),i(10,"p-card")(11,"p-table",7),M(12,rt,15,0,"ng-template",8)(13,st,16,12,"ng-template",9),n()(),i(14,"p-dialog",10),_("visibleChange",function(e){return m(t.displayVisitDialog,e)||(t.displayVisitDialog=e),e}),i(15,"div",11)(16,"div",12)(17,"label",13),s(18,"Patient *"),n(),i(19,"p-dropdown",14),_("ngModelChange",function(e){return m(t.visitForm.patient_id,e)||(t.visitForm.patient_id=e),e}),n()(),i(20,"div",12)(21,"label",15),s(22,"Visit Type *"),n(),i(23,"p-dropdown",16),_("ngModelChange",function(e){return m(t.visitForm.visit_type,e)||(t.visitForm.visit_type=e),e}),n()(),M(24,lt,4,2,"div",17),i(25,"div",12)(26,"label",18),s(27,"Doctor *"),n(),i(28,"p-dropdown",19),_("ngModelChange",function(e){return m(t.visitForm.doctor_id,e)||(t.visitForm.doctor_id=e),e}),n()(),i(29,"div",12)(30,"label",20),s(31,"Visit Date *"),n(),i(32,"p-calendar",21),_("ngModelChange",function(e){return m(t.visitForm.visit_date,e)||(t.visitForm.visit_date=e),e}),n()()(),M(33,dt,2,1,"ng-template",22),n(),i(34,"p-dialog",23),_("visibleChange",function(e){return m(t.displayConsultationDialog,e)||(t.displayConsultationDialog=e),e}),i(35,"div",11)(36,"div",24)(37,"div",25)(38,"label",26),s(39,"Height (cm)"),n(),i(40,"input",27),_("ngModelChange",function(e){return m(t.consultationForm.height,e)||(t.consultationForm.height=e),e}),n()(),i(41,"div",25)(42,"label",28),s(43,"Weight (kg)"),n(),i(44,"input",29),_("ngModelChange",function(e){return m(t.consultationForm.weight,e)||(t.consultationForm.weight=e),e}),n()(),i(45,"div",25)(46,"label",30),s(47,"BP (Systolic)"),n(),i(48,"input",31),_("ngModelChange",function(e){return m(t.consultationForm.systolic_bp,e)||(t.consultationForm.systolic_bp=e),e}),n()(),i(49,"div",25)(50,"label",32),s(51,"Pulse Rate"),n(),i(52,"input",33),_("ngModelChange",function(e){return m(t.consultationForm.pulse_rate,e)||(t.consultationForm.pulse_rate=e),e}),n()(),i(53,"div",25)(54,"label",34),s(55,"BMI"),n(),i(56,"input",35),_("ngModelChange",function(e){return m(t.consultationForm.bmi,e)||(t.consultationForm.bmi=e),e}),n()()(),i(57,"div",12)(58,"label",36),s(59,"Diagnosis Notes"),n(),i(60,"textarea",37),_("ngModelChange",function(e){return m(t.consultationForm.diagnosis_notes,e)||(t.consultationForm.diagnosis_notes=e),e}),n()()(),M(61,pt,2,1,"ng-template",22),n()()),o&2&&(l(9),p("ngModel",t.searchText),l(2),c("value",t.filteredVisits)("paginator",!0)("rows",10),l(3),b(V(32,ot)),p("visible",t.displayVisitDialog),c("header",t.isEditMode?"Edit Visit":"New Visit")("modal",!0),l(5),p("ngModel",t.visitForm.patient_id),c("options",t.patients)("required",!0),l(4),p("ngModel",t.visitForm.visit_type),c("options",t.visitTypes)("required",!0),l(),c("ngIf",t.visitForm.visit_type==="CAMP"),l(4),p("ngModel",t.visitForm.doctor_id),c("options",t.doctors)("required",!0),l(4),p("ngModel",t.visitForm.visit_date),c("required",!0)("showIcon",!0),l(2),b(V(33,at)),p("visible",t.displayConsultationDialog),c("modal",!0),l(6),p("ngModel",t.consultationForm.height),l(4),p("ngModel",t.consultationForm.weight),l(4),p("ngModel",t.consultationForm.systolic_bp),l(4),p("ngModel",t.consultationForm.pulse_rate),l(4),p("ngModel",t.consultationForm.bmi),l(4),p("ngModel",t.consultationForm.diagnosis_notes))},dependencies:[D,E,F,J,k,A,N,R,q,j,Y,W,I,O,U,Q,Z,X,tt,$,K,z,B,L,et,H,G,it],styles:['.header-section[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:20px;padding:20px 24px}.header-section[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{color:var(--medical-text);margin:0;font-weight:600}.header-section[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{margin-right:5px}@media (max-width: 768px){.header-section[_ngcontent-%COMP%]{flex-direction:column;gap:15px;align-items:flex-start}}.search-card[_ngcontent-%COMP%]{margin-bottom:20px}.search-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]{padding:20px!important}.search-card[_ngcontent-%COMP%]   .search-field[_ngcontent-%COMP%]{width:100%}.form-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:20px;padding:20px 0}.form-container[_ngcontent-%COMP%]   .field[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:8px}.form-container[_ngcontent-%COMP%]   .field[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-weight:500;color:var(--p-text-color);font-size:14px;margin-bottom:4px}.form-container[_ngcontent-%COMP%]   .field.full-width[_ngcontent-%COMP%]{width:100%}.form-container[_ngcontent-%COMP%]   .field[_ngcontent-%COMP%]     .p-inputtext, .form-container[_ngcontent-%COMP%]   .field[_ngcontent-%COMP%]     .p-dropdown, .form-container[_ngcontent-%COMP%]   .field[_ngcontent-%COMP%]     .p-calendar{width:100%}.form-container[_ngcontent-%COMP%]   .field[_ngcontent-%COMP%]     .p-dropdown .p-inputtext, .form-container[_ngcontent-%COMP%]   .field[_ngcontent-%COMP%]     .p-calendar .p-inputtext{width:100%}.form-container[_ngcontent-%COMP%]   .field[_ngcontent-%COMP%]     input[required]+label:after, .form-container[_ngcontent-%COMP%]   .field[_ngcontent-%COMP%]     .p-dropdown[required]+label:after, .form-container[_ngcontent-%COMP%]   .field[_ngcontent-%COMP%]     .p-calendar[required]+label:after{content:" *";color:var(--p-danger-color)}.form-container[_ngcontent-%COMP%]   .vitals-row[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(150px,1fr));gap:15px}']})};export{nt as VisitsComponent};
