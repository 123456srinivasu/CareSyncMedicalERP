import{a as z,b as J}from"./chunk-S4ZXMNS3.js";import{a as G,b as j}from"./chunk-LA77VLWS.js";import{a as U,b as X}from"./chunk-O424JL4V.js";import{a as K,b as Q}from"./chunk-E4SL4NQR.js";import{g as B,h as H}from"./chunk-Z364KTRN.js";import{j as A,l as I,m as k,o as q,q as V}from"./chunk-DFYNJMLI.js";import"./chunk-TW4MKDRA.js";import"./chunk-3YGUWUUY.js";import{a as N,b as W}from"./chunk-NMIQV5RM.js";import{Cd as T,Eb as o,Fb as C,Ia as l,Ib as s,Jb as c,Kb as u,Mb as b,Rd as L,Sa as D,Sd as F,Vb as y,Xb as S,Ya as w,Z as h,_ as M,a as f,b as E,db as m,gb as x,mb as t,nb as n,ob as P,sb as R,ub as _,uc as v,vb as g,vc as O}from"./chunk-NQGTOHWB.js";var Z=()=>({width:"600px"});function $(d,r){d&1&&(t(0,"tr")(1,"th"),o(2,"ID"),n(),t(3,"th"),o(4,"Camp"),n(),t(5,"th"),o(6,"Location"),n(),t(7,"th"),o(8,"Planned Date"),n(),t(9,"th"),o(10,"Actual Date"),n(),t(11,"th"),o(12,"Status"),n(),t(13,"th"),o(14,"Actions"),n()())}function ee(d,r){if(d&1){let i=R();t(0,"tr")(1,"td"),o(2),n(),t(3,"td"),o(4),n(),t(5,"td"),o(6),n(),t(7,"td"),o(8),y(9,"date"),n(),t(10,"td"),o(11),y(12,"date"),n(),t(13,"td"),P(14,"p-tag",24),n(),t(15,"td")(16,"p-button",25),_("onClick",function(){let p=h(i).$implicit,a=g();return M(a.editRun(p))}),n()()()}if(d&2){let i=r.$implicit,e=g();l(2),C(i.camp_run_id),l(2),C(i.camp_name),l(2),C(i.location_name),l(2),C(S(9,9,i.planned_date,"shortDate")),l(3),C(i.actual_date?S(12,12,i.actual_date,"shortDate"):"N/A"),l(3),m("value",i.status)("severity",e.getStatusSeverity(i.status)),l(2),m("text",!0)("rounded",!0)}}function te(d,r){if(d&1){let i=R();t(0,"p-button",26),_("onClick",function(){h(i);let p=g();return M(p.displayDialog=!1)}),n(),t(1,"p-button",27),_("onClick",function(){h(i);let p=g();return M(p.saveRun())}),n()}d&2&&m("text",!0)}var Y=class d{campRuns=[];filteredCampRuns=[];displayDialog=!1;isEditMode=!1;searchText="";statuses=["PLANNED","STARTED","CLOSED","CANCELLED"];camps=[{camp_id:1,camp_name:"General Health Camp"},{camp_id:2,camp_name:"Diabetes Screening Camp"}];locations=[{location_version_id:1,location_name:"Main Hall"},{location_version_id:2,location_name:"Community Center"}];campRunForm={camp_id:0,location_version_id:0,planned_date:new Date,status:"PLANNED"};ngOnInit(){this.loadCampRuns()}loadCampRuns(){this.campRuns=[{camp_run_id:1,camp_id:1,location_version_id:1,planned_date:new Date("2024-02-01"),actual_date:new Date("2024-02-01"),status:"CLOSED",camp_name:"General Health Camp",location_name:"Main Hall",created_at:new Date("2024-01-15")},{camp_run_id:2,camp_id:1,location_version_id:1,planned_date:new Date("2024-02-15"),status:"PLANNED",camp_name:"General Health Camp",location_name:"Main Hall",created_at:new Date("2024-01-20")}],this.filteredCampRuns=[...this.campRuns]}onSearch(){if(!this.searchText){this.filteredCampRuns=[...this.campRuns];return}this.filteredCampRuns=this.campRuns.filter(r=>r.camp_name?.toLowerCase().includes(this.searchText.toLowerCase())||r.location_name?.toLowerCase().includes(this.searchText.toLowerCase()))}openNew(){this.campRunForm={camp_id:0,location_version_id:0,planned_date:new Date,status:"PLANNED"},this.isEditMode=!1,this.displayDialog=!0}editRun(r){this.campRunForm=f({},r),this.isEditMode=!0,this.displayDialog=!0}saveRun(){if(this.isEditMode&&this.campRunForm.camp_run_id){let r=this.campRuns.findIndex(i=>i.camp_run_id===this.campRunForm.camp_run_id);r!==-1&&(this.campRuns[r]=f({},this.campRunForm))}else{let r=Math.max(...this.campRuns.map(i=>i.camp_run_id||0))+1;this.campRuns.push(E(f({},this.campRunForm),{camp_run_id:r,created_at:new Date}))}this.filteredCampRuns=[...this.campRuns],this.displayDialog=!1}getStatusSeverity(r){switch(r){case"PLANNED":return"info";case"STARTED":return"warning";case"CLOSED":return"success";case"CANCELLED":return"danger";default:return null}}static \u0275fac=function(i){return new(i||d)};static \u0275cmp=D({type:d,selectors:[["app-camp-runs"]],decls:37,vars:25,consts:[[1,"camp-runs-container"],[1,"header-section"],["label","New Camp Run","icon","pi pi-plus","styleClass","p-button-raised",3,"onClick"],[1,"search-card"],[1,"search-field"],["for","search"],["pInputText","","id","search","placeholder","Search by camp or location",1,"w-full",3,"ngModelChange","input","ngModel"],["styleClass","p-datatable-striped",3,"value","paginator","rows"],["pTemplate","header"],["pTemplate","body"],[3,"visibleChange","visible","header","modal"],[1,"form-container"],[1,"field","full-width"],["for","camp"],["id","camp","optionLabel","camp_name","optionValue","camp_id","placeholder","Select Camp",1,"w-full",3,"ngModelChange","ngModel","options","required"],["for","location"],["id","location","optionLabel","location_name","optionValue","location_version_id","placeholder","Select Location",1,"w-full",3,"ngModelChange","ngModel","options","required"],["for","plannedDate"],["id","plannedDate","dateFormat","yy-mm-dd",1,"w-full",3,"ngModelChange","ngModel","required","showIcon"],["for","actualDate"],["id","actualDate","dateFormat","yy-mm-dd",1,"w-full",3,"ngModelChange","ngModel","showIcon"],["for","status"],["id","status","placeholder","Select Status",1,"w-full",3,"ngModelChange","ngModel","options","required","showClear"],["pTemplate","footer"],[3,"value","severity"],["icon","pi pi-pencil","severity","info","title","Edit",3,"onClick","text","rounded"],["label","Cancel",3,"onClick","text"],["label","Save",3,"onClick"]],template:function(i,e){i&1&&(t(0,"div",0)(1,"div",1)(2,"h1"),o(3,"Camp Runs"),n(),t(4,"p-button",2),_("onClick",function(){return e.openNew()}),n()(),t(5,"p-card",3)(6,"div",4)(7,"label",5),o(8,"Search Camp Runs"),n(),t(9,"input",6),u("ngModelChange",function(a){return c(e.searchText,a)||(e.searchText=a),a}),_("input",function(){return e.onSearch()}),n()()(),t(10,"p-card")(11,"p-table",7),w(12,$,15,0,"ng-template",8)(13,ee,17,15,"ng-template",9),n()(),t(14,"p-dialog",10),u("visibleChange",function(a){return c(e.displayDialog,a)||(e.displayDialog=a),a}),t(15,"div",11)(16,"div",12)(17,"label",13),o(18,"Camp *"),n(),t(19,"p-dropdown",14),u("ngModelChange",function(a){return c(e.campRunForm.camp_id,a)||(e.campRunForm.camp_id=a),a}),n()(),t(20,"div",12)(21,"label",15),o(22,"Location *"),n(),t(23,"p-dropdown",16),u("ngModelChange",function(a){return c(e.campRunForm.location_version_id,a)||(e.campRunForm.location_version_id=a),a}),n()(),t(24,"div",12)(25,"label",17),o(26,"Planned Date *"),n(),t(27,"p-calendar",18),u("ngModelChange",function(a){return c(e.campRunForm.planned_date,a)||(e.campRunForm.planned_date=a),a}),n()(),t(28,"div",12)(29,"label",19),o(30,"Actual Date"),n(),t(31,"p-calendar",20),u("ngModelChange",function(a){return c(e.campRunForm.actual_date,a)||(e.campRunForm.actual_date=a),a}),n()(),t(32,"div",12)(33,"label",21),o(34,"Status *"),n(),t(35,"p-dropdown",22),u("ngModelChange",function(a){return c(e.campRunForm.status,a)||(e.campRunForm.status=a),a}),n()()(),w(36,te,2,1,"ng-template",23),n()()),i&2&&(l(9),s("ngModel",e.searchText),l(2),m("value",e.filteredCampRuns)("paginator",!0)("rows",10),l(3),x(b(24,Z)),s("visible",e.displayDialog),m("header",e.isEditMode?"Edit Camp Run":"New Camp Run")("modal",!0),l(5),s("ngModel",e.campRunForm.camp_id),m("options",e.camps)("required",!0),l(4),s("ngModel",e.campRunForm.location_version_id),m("options",e.locations)("required",!0),l(4),s("ngModel",e.campRunForm.planned_date),m("required",!0)("showIcon",!0),l(4),s("ngModel",e.campRunForm.actual_date),m("showIcon",!0),l(4),s("ngModel",e.campRunForm.status),m("options",e.statuses)("required",!0)("showClear",!1))},dependencies:[O,v,V,A,I,q,k,H,B,T,F,L,J,z,Q,K,X,U,j,G,W,N],styles:['.header-section[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:20px;padding:20px 24px}.header-section[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{color:var(--medical-text);margin:0;font-weight:600}.header-section[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{margin-right:5px}@media (max-width: 768px){.header-section[_ngcontent-%COMP%]{flex-direction:column;gap:15px;align-items:flex-start}}.search-card[_ngcontent-%COMP%]{margin-bottom:20px}.search-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]{padding:20px!important}.search-card[_ngcontent-%COMP%]   .search-field[_ngcontent-%COMP%]{width:100%}.form-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:20px;padding:20px 0}.form-container[_ngcontent-%COMP%]   .field[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:8px}.form-container[_ngcontent-%COMP%]   .field[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-weight:500;color:var(--p-text-color);font-size:14px;margin-bottom:4px}.form-container[_ngcontent-%COMP%]   .field.full-width[_ngcontent-%COMP%]{width:100%}.form-container[_ngcontent-%COMP%]   .field[_ngcontent-%COMP%]     .p-inputtext, .form-container[_ngcontent-%COMP%]   .field[_ngcontent-%COMP%]     .p-dropdown, .form-container[_ngcontent-%COMP%]   .field[_ngcontent-%COMP%]     .p-calendar{width:100%}.form-container[_ngcontent-%COMP%]   .field[_ngcontent-%COMP%]     .p-dropdown .p-inputtext, .form-container[_ngcontent-%COMP%]   .field[_ngcontent-%COMP%]     .p-calendar .p-inputtext{width:100%}.form-container[_ngcontent-%COMP%]   .field[_ngcontent-%COMP%]     input[required]+label:after, .form-container[_ngcontent-%COMP%]   .field[_ngcontent-%COMP%]     .p-dropdown[required]+label:after, .form-container[_ngcontent-%COMP%]   .field[_ngcontent-%COMP%]     .p-calendar[required]+label:after{content:" *";color:var(--p-danger-color)}']})};export{Y as CampRunsComponent};
